<p><%= flash[:notice] %></p>



<div class="container">
  <div class="row">
<div class = "col-xs-3">

<h2>User info</h2>
    <%= attachment_image_tag @user, :profile_image, :fill, 60, 60, format: 'jpeg',fallback: "no_image.jpg", class: "img-circle pull-left profile-img" %>
   <table class="table">
      <tbody>
        <tr></tr> 
      <tr>
        <th>name</th>
        <th><%= @user.name %></th>
        <th></th>
      </tr>
      <tr>
        <th>introduction</th>
        <th><%= @user.introduction %></th>
        <th></th>
      </tr>
       <tr>
        <th>sex</th>
        <th><%= @user.sex %></th>
        <th></th>
      </tr>
       <tr>
        <th>address</th>
        <th><%= @user.address %></th>
        <th></th>
      </tr>
</tbody>
</table>
    <% if @user.id == current_user.id %>
      <%= link_to "", edit_user_path(current_user), class: "col-xs-12 btn btn-default glyphicon glyphicon-wrench" %>
      <% else %>
      <%=  link_to "", user_path(current_user.id), class: "col-xs-12 btn btn-default glyphicon glyphicon-wrench" %>
      <% end %>



<h2>New book</h2>

<%= form_for @book, url: books_path do |f| %>

<h4>Title</h4>
<%= f.text_field :title %>

<h4>Body</h4>
<%= f.text_area :body %><br>

<%= f.submit "Create Book" %>
<% if @book.errors.any? %>
  <div id="error_explanation" class="alert alert-danger">
    <ul>
      <% @book.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
<% end %>
</div>

<% end %>


<div class = "col-xs-9">
<h1>Books</h1>

<table class="table table-striped">
<thead>
<tr>
<th></th>
<th>Title</th>
<th>Oponion</th>
<th colspan="3"></th>
</tr>
</thead>

<tbody>
<% @user.books.each do |book| %>
<tr>
  <td>
 <%= link_to user_path(book.user.id) do %>
 <%= attachment_image_tag book.user, :profile_image,format: 'jpeg', fallback: "no_image.jpg",size: "50x50"  %></td>
      <% end %>
  <td><%= link_to book.title, book_path(book.id) %></td>

  <td><%= book.body %></td>
</tr>
  <% end %>
</tbody>
</table>
</div>
</div>
</div>